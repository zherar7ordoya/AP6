

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from mvcsharp.org/Basics_of_MVC_and_MVP/Default.aspx by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 30 Oct 2008 03:47:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head><title>
	The basics of MVC and MVP
</title><link href="../Styles.css" rel="stylesheet" type="text/css" /></head>
<body>
    <form name="aspnetForm" method="post" action="http://mvcsharp.org/Basics_of_MVC_and_MVP/Default.aspx" id="aspnetForm">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTcwODg1MTE2Ng9kFgJmD2QWAgIDD2QWAgIJDzwrAAkCAA8WBB4NTmV2ZXJFeHBhbmRlZGQeC18hRGF0YUJvdW5kZ2QIFCsABQUPMDowLDA6MSwwOjIsMDozFCsAAhYMHgRUZXh0BQ1Eb2N1bWVudGF0aW9uHgVWYWx1ZQUNRG9jdW1lbnRhdGlvbh4LTmF2aWdhdGVVcmwFEy9Eb2N1bWVudGF0aW9uLmFzcHgeCERhdGFQYXRoBRMvZG9jdW1lbnRhdGlvbi5hc3B4HglEYXRhQm91bmRnHghFeHBhbmRlZGcUKwAFBQ8wOjAsMDoxLDA6MiwwOjMUKwACFgofAgUIT3ZlcnZpZXcfAwUIT3ZlcnZpZXcfBAUWL092ZXJ2aWV3L0RlZmF1bHQuYXNweB8FBRYvb3ZlcnZpZXcvZGVmYXVsdC5hc3B4HwZnZBQrAAIWCh8CBQhFeGFtcGxlcx8DBQhFeGFtcGxlcx8EBQ4vRXhhbXBsZXMuYXNweB8FBQ4vZXhhbXBsZXMuYXNweB8GZxQrAAcFFzA6MCwwOjEsMDoyLDA6MywwOjQsMDo1FCsAAhYKHwIFHDEuIEdldHRpbmcgc3RhcnRlZCB3aXRoIE1WQyMfAwUcMS4gR2V0dGluZyBzdGFydGVkIHdpdGggTVZDIx8EBSsvR2V0dGluZ19zdGFydGVkX3dpdGhfTVZDU2hhcnAvRGVmYXVsdC5hc3B4HwUFKy9nZXR0aW5nX3N0YXJ0ZWRfd2l0aF9tdmNzaGFycC9kZWZhdWx0LmFzcHgfBmdkFCsAAhYKHwIFFDIuIFRhc2tzIGludGVyYWN0aW9uHwMFFDIuIFRhc2tzIGludGVyYWN0aW9uHwQFHy9UYXNrc19JbnRlcmFjdGlvbi9EZWZhdWx0LmFzcHgfBQUfL3Rhc2tzX2ludGVyYWN0aW9uL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUeMy4gVXNpbmcgV2luZm9ybXMgdmlld3MgZW5naW5lHwMFHjMuIFVzaW5nIFdpbmZvcm1zIHZpZXdzIGVuZ2luZR8EBSkvVXNpbmdfV2luZm9ybXNfdmlld3NfZW5naW5lL0RlZmF1bHQuYXNweB8FBSkvdXNpbmdfd2luZm9ybXNfdmlld3NfZW5naW5lL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUoNC4gUmV3b3JraW5nIEFTUC5ORVQgTVZDIFN0b3JlIHdpdGggTVZDIx8DBSg0LiBSZXdvcmtpbmcgQVNQLk5FVCBNVkMgU3RvcmUgd2l0aCBNVkMjHwQFKC9SZXdvcmtpbmdfQVNQTkVUX01WQ19TdG9yZS9EZWZhdWx0LmFzcHgfBQUoL3Jld29ya2luZ19hc3BuZXRfbXZjX3N0b3JlL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUZNS4gQWR2YW5jZWQgQ3VzdG9taXphdGlvbh8DBRk1LiBBZHZhbmNlZCBDdXN0b21pemF0aW9uHwQFJC9BZHZhbmNlZF9DdXN0b21pemF0aW9uL0RlZmF1bHQuYXNweB8FBSQvYWR2YW5jZWRfY3VzdG9taXphdGlvbi9kZWZhdWx0LmFzcHgfBmdkFCsAAhYKHwIFGjYuIFNpbHZlcmxpZ2h0IGFuZCAuTkVUIENGHwMFGjYuIFNpbHZlcmxpZ2h0IGFuZCAuTkVUIENGHwQFES9TaWx2ZXJsaWdodC5hc3B4HwUFES9zaWx2ZXJsaWdodC5hc3B4HwZnZBQrAAIWCh8CBQhBUEkgRG9jcx8DBQhBUEkgRG9jcx8EBRQvQVBJX0RvY3MvSW5kZXguYXNweB8FBRQvYXBpX2RvY3MvaW5kZXguYXNweB8GZ2QUKwACFgwfAgULRGV2ZWxvcG1lbnQfAwULRGV2ZWxvcG1lbnQfBAURL0RldmVsb3BtZW50LmFzcHgfBQURL2RldmVsb3BtZW50LmFzcHgfBmcfB2cUKwAFBQ8wOjAsMDoxLDA6MiwwOjMUKwACFg4fAgUYMS4gQmFzaWNzIG9mIE1WQyBhbmQgTVZQHwMFGDEuIEJhc2ljcyBvZiBNVkMgYW5kIE1WUB8EBSMvQmFzaWNzX29mX01WQ19hbmRfTVZQL0RlZmF1bHQuYXNweB8FBSMvYmFzaWNzX29mX212Y19hbmRfbXZwL2RlZmF1bHQuYXNweB8GZx4IU2VsZWN0ZWRnHwdnZBQrAAIWCh8CBSYyLiBJbXBsZW1lbnRpbmcgY29yZSBNVlAgZnVuY3Rpb25hbGl0eR8DBSYyLiBJbXBsZW1lbnRpbmcgY29yZSBNVlAgZnVuY3Rpb25hbGl0eR8EBTEvSW1wbGVtZW50aW5nX2NvcmVfTVZQX2Z1bmN0aW9uYWxpdHkvRGVmYXVsdC5hc3B4HwUFMS9pbXBsZW1lbnRpbmdfY29yZV9tdnBfZnVuY3Rpb25hbGl0eS9kZWZhdWx0LmFzcHgfBmdkFCsAAhYKHwIFIjMuIERlc2lnbmluZyBXaW5mb3JtcyB2aWV3cyBlbmdpbmUfAwUiMy4gRGVzaWduaW5nIFdpbmZvcm1zIHZpZXdzIGVuZ2luZR8EBS0vRGVzaWduaW5nX1dpbmZvcm1zX3ZpZXdzX2VuZ2luZS9EZWZhdWx0LmFzcHgfBQUtL2Rlc2lnbmluZ193aW5mb3Jtc192aWV3c19lbmdpbmUvZGVmYXVsdC5hc3B4HwZnZBQrAAIWCh8CBR40LiBTdHJvbmdseSB0eXBlZCBhc3NvY2lhdGlvbnMfAwUeNC4gU3Ryb25nbHkgdHlwZWQgYXNzb2NpYXRpb25zHwQFKS9TdHJvbmdseS10eXBlZF9hc3NvY2lhdGlvbnMvRGVmYXVsdC5hc3B4HwUFKS9zdHJvbmdseS10eXBlZF9hc3NvY2lhdGlvbnMvZGVmYXVsdC5hc3B4HwZnZBQrAAIWCh8CBQdDaGFuZ2VzHwMFB0NoYW5nZXMfBAUNL0NoYW5nZXMuYXNweB8FBQ0vY2hhbmdlcy5hc3B4HwZnZBQrAAIWCh8CBQhGZWVkYmFjax8DBQhGZWVkYmFjax8EBQ4vRmVlZGJhY2suYXNweB8FBQ4vZmVlZGJhY2suYXNweB8GZ2QUKwACFgofAgUIRG93bmxvYWQfAwUIRG93bmxvYWQfBAUOL0Rvd25sb2FkLmFzcHgfBQUOL2Rvd25sb2FkLmFzcHgfBmdkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAQUKY3RsMDAkTWVudTFfoCS2YWs1vDqbJYipsMrr8TyW" />

        <div id="pageWrapper">
            
            <div>
                <img id="ctl00_logo" src="../Images/logo.PNG" border="0" />
                <div id="breadcrumbs">
                    <div><img id="ctl00_spacer" src="../Images/spacer.bmp" height="1" width="875" border="0" /></div>
                    <span id="ctl00_SiteMapPath"><a href="#ctl00_SiteMapPath_SkipLink"><img alt="Skip Navigation Links" height="0" width="0" src="../WebResourcee862.gif?d=-tf2UOPilGOzHQ2P_iOPlg2&amp;t=633440833918844552" border="0" /></a><span><a href="../Default.html">Home</a></span><span>&#160;&gt;&#160;</span><span><a href="../Documentation.html">Documentation</a></span><span>&#160;&gt;&#160;</span><span><a href="../Development.html">Development</a></span><span>&#160;&gt;&#160;</span><span>1. Basics of MVC and MVP</span><a id="ctl00_SiteMapPath_SkipLink"></a></span>
                </div>
            </div>
            <div id="menuAndContent">
                <div id="menu">
                    <a href="#ctl00_Menu_SkipLink"><img alt="Skip Navigation Links." src="../WebResourcee862.gif?d=-tf2UOPilGOzHQ2P_iOPlg2&amp;t=633440833918844552" width="0" height="0" border="0" /></a><table id="ctl00_Menu" cellpadding="0" cellspacing="0" border="0" width="238"><tr><td>
	<table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Documentation.html" id="ctl00_Menun0">Documentation</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Overview/Default.html" id="ctl00_Menun1">Overview</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Examples.html" id="ctl00_Menun2">Examples</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="http://mvcsharp.org/API_Docs/Index.aspx" id="ctl00_Menun9">API Docs</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Development.html" id="ctl00_Menun10">Development</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItemSelected menuItem"><a class="menuItemSelected menuItem" href="Default.html" id="ctl00_Menun11">1. Basics of MVC and MVP</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Implementing_core_MVP_functionality/Default.html" id="ctl00_Menun12">2. Implementing core MVP functionality</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Designing_Winforms_views_engine/Default.html" id="ctl00_Menun13">3. Designing Winforms views engine</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Strongly-typed_associations/Default.html" id="ctl00_Menun14">4. Strongly typed associations</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Changes.html" id="ctl00_Menun15">Changes</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Feedback.html" id="ctl00_Menun16">Feedback</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Download.html" id="ctl00_Menun17">Download</a></td>
		</tr>
	</table>
</td></tr></table><a id="ctl00_Menu_SkipLink"></a>
                </div> 
                <div id="content">  
                    
<h1>Part 1. The basics of MVC and MVP</h1>

<a href="#Introduction">Introduction</a><br/>
<a href="#Basic concepts">Basic concepts</a><br/>
<a href="#Interaction point as a single view">Interaction point as a single view</a><br/>
<a href="#Model-View-Controller">Model-View-Controller</a><br/>
<a href="#Model-View-Presenter">Model-View-Presenter</a><br/>
<a href="#Summary">Summary</a><br/>

<a id="Introduction"></a><h2>Introduction</h2>

<p>
    Clear separation of responsibilities along with a low coupling level is a sign of
    a well-designed application. Whereas design patterns are proven solutions to reduce
    coupling between small sets of objects, architectural patterns help to improve a
    system’s design on the whole. One popular architectural pattern is Model-View-Controller.
    Originally came from Smalltalk now it has implementations in various languages.
    In Java for example such frameworks as Spring and Struts have gained high popularity
    and are widely used. However in .NET world the existing implementations aren’t much
    spread, being mainly inspired by Java implementations they fit well only for Web
    applications and are not suitable for Windows thick client applications.</p>
    <p>
        Another architectural pattern that in fact is an evolution of MVC is Model-View-Presenter.
        The underlying ideas of MVP are very similar to those in MVC however MVP is designed
        to be more usable and understandable. MVP has much less implementations then MVC
        does, one known MVP implementation for .NET is the Microsoft User Interface
        Process application block (UIPAB). In spite of numerous problems, and hence low
        usability of UIPAB, its reasonable key concepts inspired us to create something
        new.</p>
    <p>
        This article starts a series covering the development of a native Model-View-Presenter
        framework for .NET platform. Although it will be an MVP framework we will still
        use the term "Controller" as it seems to be be more pertinent than the "Presenter"
        notation (UIPAB follows the same manner describing itself as MVC, though in fact it
        is closer to MVP). Let us start with clarifying the basic concepts of an application’s
        structure. After that we will proceed to the discussion of the existing architectural
        solutions (including MVC and MVP).</p>
    <h2>
        </h2>

<a id="Basic concepts"></a><h2>
    Basic concepts</h2>
    <p>
        Every application can be split into a number of tasks. Here by task we mean a sequence
        of actions which accomplish a job, problem or assignment. There are different ways
        of breaking an application into tasks for example tasks may be associated with use
        cases. Each task involves interaction with a user done via so called interaction
        points. An interaction point is represented by one or more classes which serve the
        following needs:</p>
    <ul>
    <li>receive and process an input from a user</li><li>make proper requests to the business objects</li><li>request/modify the task’s state</li><li>send feedback to the user</li></ul>
    <p>
    </p>

<p>
    The following figure illustrates the described relationships.</p>
    <p><img src="Images/1.GIF"/></p>
    <p>
        As we can see the interaction point responsibilities are rather vast. That is why
        architectural solutions such as MVC make their aim to split interaction points into
        simpler parts. Next we will consider various ways of splitting the interaction point
        (including the MVC paradigm). Though the division of the interaction point into
        smaller elements is preferred we will start with a case when an interaction point
        is represented by a single view class.</p>
    <h2>
    </h2>

<a id="Interaction point as a single view"></a><h2>
    Interaction point as a single view</h2>

<p>
    When the interaction point is made of a single view class it is the view which is
    responsible for all intermediate data processing. Such view class handles user input,
    makes proper calls to the business objects, analyses the data received from them,
    decides what to display to the user and actually displays it.</p><p><img src="Images/2.GIF"/>
    </p>

<p>
    In order to demonstrate this and the other approaches let us now introduce the example
    we will refer to throughout the article. Consider the encyclopedia application where
    a user enters some term and the system gives back the explanation for it. In most
    cases the explanation is unambiguously found for a term. However sometimes several
    explanations of a term (especially if the term is an abbreviation) may apply and
    the system then asks the user which one to display.</p><p>
        With a single view approach the sequence diagram for our encyclopedia application
        would look as follows:</p>
    <p><img src="Images/3.GIF"/>&nbsp;</p>
    <p>
        This figure reveals the drawbacks of combining all intermediate logic into a view
        class. The view then becomes too bloated and difficult for understanding. Moreover
        such approach violates the single responsibility principle by uniting in the view
        two conceptually different responsibilities. First is making requests to the model
        and deciding what to display (application logic) and the second is actually displaying
        (presentation mechanism). As a result if we want to make our encyclopedia work both
        as a windows and a web application we will have to duplicate the application logic
        in two view classes: one for Windows and the other for web environment.</p>
    <h2>
    </h2>

<a id="Model-View-Controller"></a><h2>
Model-View-Controller</h2>
    <p>
        We have seen the downsides of the solution when the interaction point is represented
        by a single view class. On the contrary to the single view technique MVC does break
        the interaction point into three parts. These parts are: Controller, View and Presentation
        model.</p>
    <p><img src="Images/4.GIF"/></p>

<p>
    Controller handles user input, makes subsequent calls to the business objects and
    manages the application flow. In particular the controller decides what to display
    to the user. However it is not allowed in MVC to access the view directly, instead
    the underlying model should be altered and the changes will be propagated to the
    view through the observer mechanism. Thus in order to make the view update itself
    the controller should change the presentation model object.</p><p>
        In our encyclopedia example the controller class asks the model for the proper explanations
        (1.1 in the figure below) and passes the returned explanations to the presentation
        model (1.2). Depending on how much explanations were found (one or more) the controller
        sets a flag in the presentation model indicating whether the user should choose
        the desired variant (1.3). The view then reflects the changes in the presentation
        model (1.3.1) and either displays dialog with several variants (1.3.1.3) or displays
        the only found explanation (1.3.1.4).</p>
    <p><img src="Images/5.GIF"/>&nbsp;</p>
    <p>
        The main advantage of MVC is a clear distribution of responsibilities between parties.
        The controller drives the application flow specifying what and when should be done.
        The view only renders the underlying business and presentation models and presents
        them to the user. Since views in MVC do not contain any application logic they can
        be harmlessly substituted, for example there may be different view classes for Windows
        and web interfaces.</p>
    <p>
        Nevertheless there are two major drawbacks in the traditional MVC approach. First
        is a higher complexity because of the observer mechanism: in order to update the
        view the controller must make changes to the presentation model, which will trigger
        the view update. Such indirect relationship may be difficult to understand. Instead
        the controller could simply send a message to the view, however such direct linking
        is not allowed in MVC.</p>
    <p>
        The other shortcoming is that MVC does not conform to the modern UI programming
        environments where widgets themselves handle user gestures. For example form classes
        (either web or Windows) in .NET applications by default contain handlers for user
        input. Thus it would be difficult to break the common paradigm and make controllers
        receive the user input instead of views.</p>
    <p>
        The next architectural pattern we consider was designed to eliminate the drawbacks
        of MVC, while preserving its separation of application logic and presentation mechanism.</p>
    <a id="Model-View-Presenter"></a><h2>
        Model-View-Presenter</h2>
    <p>
        Model-View-Presenter approach appeared in the late 1990’s and was an evolution of
        MVC pattern. Above we have described two typical shortcomings of the MVC pattern.
        Now let us look at how MVP eliminates these two.</p>
    <p>
        Firstly according to MVP direct requests from the controller to the view become
        possible. Thus the controller itself may trigger the view updates instead of performing
        a round trip through the presentation model. In this sense the controller in MVP
        contains the presentation model from MVC. That is probably the reason why the controller
        in MVP is referred to as presenter (however we will continue naming it controller).</p>
    <p><img src="Images/6.GIF"/></p>
    <p>
        Here we must note that although the controller has a link to the view object it
        does not depend on the concrete view class. Instead the controller treats the view
        in an abstracted way by the means of a separated interface implemented by the view
        (see the figure above). For example the encyclopedia controller will communicate
        the view via the IEncyclopediaView interface with “chooseExplFrom(…)” and “displayExpl(…)”
        operations. Since such separated interface is a part of the application logic, the
        dependency runs from the presentation to the application logic but not vice versa.</p>
    <p>
        Next thing that makes MVP more convenient (in contrast to MVC) is that it allows
        views to receive user input. Such behavior fits well modern UI environments. For
        instance in Windows keyboard and mouse events are handled by UI controls and forms,
        in ASP.NET user requests are processed by web page classes. Though the view in MVP
        receives the user input it should merely delegate all the processing to the controller.</p>
    <p>
        The next figure demonstrates the interactions in MVP by the example of the encyclopedia
        application. As we can see direct calls from the controller to the view (via the
        IEncyclopediaView interface) make the overall picture less complicated then that
        in MVC. Yet the clear separation of responsibilities between the controller (application
        logic) and the view (presentation mechanism) still remains, in particular allowing
        the developer to easily support interchangeable views for web and Windows environments.</p>
    <p><img src="Images/7.GIF"/></p>

    <a id="Summary"></a><h2>
    Summary</h2>
    <p>
        Let us sum up what we have discussed so far. Among the architectural patterns we
        have considered MVP seems to be the most attractive one. It allows building flexible
        systems without overheads peculiar to the classic MVC approach. That is why it is
        MVP that we are going to base our framework on.</p>
    <p>
        <a href="../Implementing_core_MVP_functionality/Default.html">Proceed to Part 2: Implementing
            core MVP functionality</a></p>


                </div>
            </div>
        </div>
        <div style="text-align:center; font-size:11px;">Copyright © www.MVCSharp.org</div>
    </form>
</body>

<!-- Mirrored from mvcsharp.org/Basics_of_MVC_and_MVP/Default.aspx by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 30 Oct 2008 03:47:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
