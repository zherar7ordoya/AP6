

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from mvcsharp.org/Using_Winforms_views_engine/Default.aspx by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 30 Oct 2008 03:46:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
<head><title>
	Using the Windows Forms views engine in MVC# framework
</title><link href="../Styles.css" rel="stylesheet" type="text/css" /></head>
<body>
    <form name="aspnetForm" method="post" action="http://mvcsharp.org/Using_Winforms_views_engine/Default.aspx" id="aspnetForm">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEwMDUyNjYzMjgPZBYCZg9kFgICAw9kFgICCQ88KwAJAgAPFgQeDU5ldmVyRXhwYW5kZWRkHgtfIURhdGFCb3VuZGdkCBQrAAUFDzA6MCwwOjEsMDoyLDA6MxQrAAIWDB4EVGV4dAUNRG9jdW1lbnRhdGlvbh4FVmFsdWUFDURvY3VtZW50YXRpb24eC05hdmlnYXRlVXJsBRMvRG9jdW1lbnRhdGlvbi5hc3B4HghEYXRhUGF0aAUTL2RvY3VtZW50YXRpb24uYXNweB4JRGF0YUJvdW5kZx4IRXhwYW5kZWRnFCsABQUPMDowLDA6MSwwOjIsMDozFCsAAhYKHwIFCE92ZXJ2aWV3HwMFCE92ZXJ2aWV3HwQFFi9PdmVydmlldy9EZWZhdWx0LmFzcHgfBQUWL292ZXJ2aWV3L2RlZmF1bHQuYXNweB8GZ2QUKwACFgwfAgUIRXhhbXBsZXMfAwUIRXhhbXBsZXMfBAUOL0V4YW1wbGVzLmFzcHgfBQUOL2V4YW1wbGVzLmFzcHgfBmcfB2cUKwAHBRcwOjAsMDoxLDA6MiwwOjMsMDo0LDA6NRQrAAIWCh8CBRwxLiBHZXR0aW5nIHN0YXJ0ZWQgd2l0aCBNVkMjHwMFHDEuIEdldHRpbmcgc3RhcnRlZCB3aXRoIE1WQyMfBAUrL0dldHRpbmdfc3RhcnRlZF93aXRoX01WQ1NoYXJwL0RlZmF1bHQuYXNweB8FBSsvZ2V0dGluZ19zdGFydGVkX3dpdGhfbXZjc2hhcnAvZGVmYXVsdC5hc3B4HwZnZBQrAAIWCh8CBRQyLiBUYXNrcyBpbnRlcmFjdGlvbh8DBRQyLiBUYXNrcyBpbnRlcmFjdGlvbh8EBR8vVGFza3NfSW50ZXJhY3Rpb24vRGVmYXVsdC5hc3B4HwUFHy90YXNrc19pbnRlcmFjdGlvbi9kZWZhdWx0LmFzcHgfBmdkFCsAAhYOHwIFHjMuIFVzaW5nIFdpbmZvcm1zIHZpZXdzIGVuZ2luZR8DBR4zLiBVc2luZyBXaW5mb3JtcyB2aWV3cyBlbmdpbmUfBAUpL1VzaW5nX1dpbmZvcm1zX3ZpZXdzX2VuZ2luZS9EZWZhdWx0LmFzcHgfBQUpL3VzaW5nX3dpbmZvcm1zX3ZpZXdzX2VuZ2luZS9kZWZhdWx0LmFzcHgfBmceCFNlbGVjdGVkZx8HZ2QUKwACFgofAgUoNC4gUmV3b3JraW5nIEFTUC5ORVQgTVZDIFN0b3JlIHdpdGggTVZDIx8DBSg0LiBSZXdvcmtpbmcgQVNQLk5FVCBNVkMgU3RvcmUgd2l0aCBNVkMjHwQFKC9SZXdvcmtpbmdfQVNQTkVUX01WQ19TdG9yZS9EZWZhdWx0LmFzcHgfBQUoL3Jld29ya2luZ19hc3BuZXRfbXZjX3N0b3JlL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUZNS4gQWR2YW5jZWQgQ3VzdG9taXphdGlvbh8DBRk1LiBBZHZhbmNlZCBDdXN0b21pemF0aW9uHwQFJC9BZHZhbmNlZF9DdXN0b21pemF0aW9uL0RlZmF1bHQuYXNweB8FBSQvYWR2YW5jZWRfY3VzdG9taXphdGlvbi9kZWZhdWx0LmFzcHgfBmdkFCsAAhYKHwIFGjYuIFNpbHZlcmxpZ2h0IGFuZCAuTkVUIENGHwMFGjYuIFNpbHZlcmxpZ2h0IGFuZCAuTkVUIENGHwQFES9TaWx2ZXJsaWdodC5hc3B4HwUFES9zaWx2ZXJsaWdodC5hc3B4HwZnZBQrAAIWCh8CBQhBUEkgRG9jcx8DBQhBUEkgRG9jcx8EBRQvQVBJX0RvY3MvSW5kZXguYXNweB8FBRQvYXBpX2RvY3MvaW5kZXguYXNweB8GZ2QUKwACFgofAgULRGV2ZWxvcG1lbnQfAwULRGV2ZWxvcG1lbnQfBAURL0RldmVsb3BtZW50LmFzcHgfBQURL2RldmVsb3BtZW50LmFzcHgfBmcUKwAFBQ8wOjAsMDoxLDA6MiwwOjMUKwACFgofAgUYMS4gQmFzaWNzIG9mIE1WQyBhbmQgTVZQHwMFGDEuIEJhc2ljcyBvZiBNVkMgYW5kIE1WUB8EBSMvQmFzaWNzX29mX01WQ19hbmRfTVZQL0RlZmF1bHQuYXNweB8FBSMvYmFzaWNzX29mX212Y19hbmRfbXZwL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUmMi4gSW1wbGVtZW50aW5nIGNvcmUgTVZQIGZ1bmN0aW9uYWxpdHkfAwUmMi4gSW1wbGVtZW50aW5nIGNvcmUgTVZQIGZ1bmN0aW9uYWxpdHkfBAUxL0ltcGxlbWVudGluZ19jb3JlX01WUF9mdW5jdGlvbmFsaXR5L0RlZmF1bHQuYXNweB8FBTEvaW1wbGVtZW50aW5nX2NvcmVfbXZwX2Z1bmN0aW9uYWxpdHkvZGVmYXVsdC5hc3B4HwZnZBQrAAIWCh8CBSIzLiBEZXNpZ25pbmcgV2luZm9ybXMgdmlld3MgZW5naW5lHwMFIjMuIERlc2lnbmluZyBXaW5mb3JtcyB2aWV3cyBlbmdpbmUfBAUtL0Rlc2lnbmluZ19XaW5mb3Jtc192aWV3c19lbmdpbmUvRGVmYXVsdC5hc3B4HwUFLS9kZXNpZ25pbmdfd2luZm9ybXNfdmlld3NfZW5naW5lL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUeNC4gU3Ryb25nbHkgdHlwZWQgYXNzb2NpYXRpb25zHwMFHjQuIFN0cm9uZ2x5IHR5cGVkIGFzc29jaWF0aW9ucx8EBSkvU3Ryb25nbHktdHlwZWRfYXNzb2NpYXRpb25zL0RlZmF1bHQuYXNweB8FBSkvc3Ryb25nbHktdHlwZWRfYXNzb2NpYXRpb25zL2RlZmF1bHQuYXNweB8GZ2QUKwACFgofAgUHQ2hhbmdlcx8DBQdDaGFuZ2VzHwQFDS9DaGFuZ2VzLmFzcHgfBQUNL2NoYW5nZXMuYXNweB8GZ2QUKwACFgofAgUIRmVlZGJhY2sfAwUIRmVlZGJhY2sfBAUOL0ZlZWRiYWNrLmFzcHgfBQUOL2ZlZWRiYWNrLmFzcHgfBmdkFCsAAhYKHwIFCERvd25sb2FkHwMFCERvd25sb2FkHwQFDi9Eb3dubG9hZC5hc3B4HwUFDi9kb3dubG9hZC5hc3B4HwZnZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFCmN0bDAwJE1lbnUaftwojAYS7OroI3GhtIyRV4scqg==" />

        <div id="pageWrapper">
            
            <div>
                <img id="ctl00_logo" src="../Images/logo.PNG" border="0" />
                <div id="breadcrumbs">
                    <div><img id="ctl00_spacer" src="../Images/spacer.bmp" height="1" width="875" border="0" /></div>
                    <span id="ctl00_SiteMapPath"><a href="#ctl00_SiteMapPath_SkipLink"><img alt="Skip Navigation Links" height="0" width="0" src="../WebResourcee862.gif?d=-tf2UOPilGOzHQ2P_iOPlg2&amp;t=633440833918844552" border="0" /></a><span><a href="../Default.html">Home</a></span><span>&#160;&gt;&#160;</span><span><a href="../Documentation.html">Documentation</a></span><span>&#160;&gt;&#160;</span><span><a href="../Examples.html">Examples</a></span><span>&#160;&gt;&#160;</span><span>3. Using Winforms views engine</span><a id="ctl00_SiteMapPath_SkipLink"></a></span>
                </div>
            </div>
            <div id="menuAndContent">
                <div id="menu">
                    <a href="#ctl00_Menu_SkipLink"><img alt="Skip Navigation Links." src="../WebResourcee862.gif?d=-tf2UOPilGOzHQ2P_iOPlg2&amp;t=633440833918844552" width="0" height="0" border="0" /></a><table id="ctl00_Menu" cellpadding="0" cellspacing="0" border="0" width="238"><tr><td>
	<table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Documentation.html" id="ctl00_Menun0">Documentation</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Overview/Default.html" id="ctl00_Menun1">Overview</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Examples.html" id="ctl00_Menun2">Examples</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Getting_started_with_MVCSharp/Default.html" id="ctl00_Menun3">1. Getting started with MVC#</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Tasks_Interaction/Default.html" id="ctl00_Menun4">2. Tasks interaction</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItemSelected menuItem"><a class="menuItemSelected menuItem" href="Default.html" id="ctl00_Menun5">3. Using Winforms views engine</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Reworking_ASPNET_MVC_Store/Default.html" id="ctl00_Menun6">4. Reworking ASP.NET MVC Store with MVC#</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Advanced_Customization/Default.html" id="ctl00_Menun7">5. Advanced Customization</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Silverlight.html" id="ctl00_Menun8">6. Silverlight and .NET CF</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="http://mvcsharp.org/API_Docs/Index.aspx" id="ctl00_Menun9">API Docs</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td><table width="20">
				<tr>
					<td></td>
				</tr>
			</table></td><td class="menuItem"><a class="menuItem" href="../Development.html" id="ctl00_Menun10">Development</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Changes.html" id="ctl00_Menun15">Changes</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Feedback.html" id="ctl00_Menun16">Feedback</a></td>
		</tr>
	</table><table cellpadding="0" cellspacing="0">
		<tr>
			<td class="menuItem"><a class="menuItem" href="../Download.html" id="ctl00_Menun17">Download</a></td>
		</tr>
	</table>
</td></tr></table><a id="ctl00_Menu_SkipLink"></a>
                </div> 
                <div id="content">  
                    
    <h1>
        Using the Windows Forms views engine in MVC# framework</h1>
    <p>
        <em>The source code of this example can be found under "Examples\WindowsFormsExample\"
            subfolder
            of the MVC# root folder.</em></p>
    <p>
        <a href="#Introduction">Introduction</a><br />
        <a href="#MDI Parent form view">MDI Parent form view</a><br />
        <a href="#Main task structure">Main task structure</a><br />
        <a href="#MDI Child views">MDI Child views</a><br />
        <a href="#User control views">User control views</a><br />
        <a href="#Notifications to views">Notifications to views</a><br />
        <a href="#Modal Dialog form">Modal Dialog form</a><br />
        <a href="#Starting the application">Starting the application</a><br />
        <a href="#Summary">Summary</a><br /></p>
    <a id="Introduction"></a><h2>
    Introduction</h2>
    <p>
        The Views part of the Model-View-Presenter triad may be implemented differently
        for different presentation mechanisms. Each presentation platform (Web forms, Windows
        forms, WPF) implies its own set of possible views, own rules for views activation
        and, overall, own presentation specifics.</p>
    <p>
        This tutorial covers the .NET Windows Forms presentation facilities in MVC# framework.
        We will walk through all kinds of views offered by the Windows Forms views engine,
        and will demonstrate how to use them.</p>
    <a id="MDI Parent form view"></a><h2>
        MDI Parent form view</h2>
    <p>
        The main form for our example application will be an MDI parent form. It will have a
        menu to select views and a status bar to show the name of the current view.</p>
    <p><img src="Images/1.png" alt="MDI parent form view"/></p>
    <p>
        For the main form to act as a view it should implement the IView interface and should
        be equipped with the [WinformsView] attribute. We could implement the IView interface
        ourselves, however the framework already provides base implementations to inherit
        from, thus we would inherit the MainForm class from the WinFormView base class.</p>
    <pre>
<span style="color: #000000;">[WinformsView(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainTask), </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Main View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;" lang="cs">, IsMdiParent </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
</span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">partial</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> MainForm : WinFormView
{
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> MainForm() { InitializeComponent(); }
}</span></pre>
    <p>
        In the [WinformsView] we have specified "IsMdiParent = true" to make the framework
        treat that view as an MDI parent.</p>
    <a id="Main task structure"></a><h2>
        Main task structure</h2>
    <p>
        The MainTask mentioned above describes the only task in our application. For the
        simplicity sake it will allow navigations between any interaction points it declares.
        This is done by setting the IsCommonTarget named parameter to "true", which makes an interaction
        point accessible from any other point.</p>
    <pre>
<span style="color: #000000;">    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> MainTask : TaskBase
    {
        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainViewController), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> MainView </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Main View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;

        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(ControllerBase), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> MdiChild1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;

        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(ControllerBase), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> MdiChild2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;

        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(ControllerBase), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> UserControlView1 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">UserControlView1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;

        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(ControllerBase), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> UserControlView2 </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">UserControlView2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;

        [IPoint(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(ControllerBase), IsCommonTarget </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">string</span><span style="color: #000000;"> AboutDlgView </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">About Dlg View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;
    }</span></pre>
    <p>
        As can be seen above besides the main view there will be five more views: two MDI
        child views, two user control views (inside each MDI child) and an "About" dialog
        view.</p>
    <p>
        MainViewController watches the change of the current view and tells the main view
        to update the corresponding label in the status bar. The MainViewController class
        also handles messages from the main view when a user selects another view in the
        menu. The CommonController class is empty since the rest part of the application
        contains only presentation logic.</p>
    <p>
        Here we do not list the code for MainViewController and CommonController, as in
        this tutorial we concern mainly presentation issues, not application logic. Yet
        you may see this code in the working example project.</p>
    <a id="MDI Child views"></a><h2>
        MDI Child views</h2>
    <p>
        Let us create a new form class. Make it a descendant of the WinFormView class (in
        order not to implement IView ourselves). We will use this form class for both "Mdi Child1" and "Mdi Child2"
        views. In the [WinformsView] attributes we specify the MdiParent property pointing
        to the "MainView":</p>
    <pre lang="cs">
<span style="color: #000000;">    [WinformsView(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainTask), </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, MdiParent </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Main View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">)]
    [WinformsView(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainTask), </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, MdiParent </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Main View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">)]
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">partial</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> MdiChildView : WinFormView
    {
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> MdiChildView()
        {
            InitializeComponent();
        }
    }</span></pre>
    <a id="User control views"></a><h2>
        User control views</h2>
    <p>
        Now create a new user control class. Make it descend from the WinUserControlView
        class. Then place a text box on it in the visual designer.</p>
    <pre lang="cs">
<span style="color: #000000;">    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">partial</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> UserControlView : WinUserControlView
    {
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> UserControlView()
        {
            InitializeComponent();
        }
    }</span></pre>
    <p><img src="Images/2.png" alt="User control view"/></p>
    <p>
        Now compile the project and place an instance of the UserControlView control on
        the MdiChildView form via the form designer. Also place a text box on the MdiChildView
        form.</p>
    <p><img src="Images/3.png" alt="MDI Child view"/></p>
    <p>
        When the system (the views manager, to be exact) finds a user control view it retrieves
        its ViewName property to know which interaction point it corresponds to. That is
        why we should correctly assign the ViewName property to the user control views.
        We will do this in the Initialize() method of the MDI child views. If an MDI child
        has "Mdi Child1" ViewName value then the inner user control view should be named
        "UserControlView1", for MDI child with the ViewName equal to "Mdi Child2" the inner
        user control view should be named "UserControlView2".</p>
    <pre lang="cs">
<span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">partial</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> MdiChildView : WinFormView
{
    ...
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">override</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Initialize()
    {
        </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (ViewName </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">)
            userControlView.ViewName </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">UserControlView1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;
        </span><span style="color: #0000FF;">else</span><span style="color: #000000;"> </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (ViewName </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Mdi Child2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">)
            userControlView.ViewName </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">UserControlView2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;
    }
}</span></pre>
    <a id="Notifications to views"></a><h2>
        Notifications to views</h2>
    <p>
        Above we have already handled the Initialize() method of the MDI child views. Let
        us also assign the form caption text in this method:</p>
    <pre lang="cs">
<span style="color: #000000;">    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">override</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Initialize()
    {
        ...
        Text </span><span style="color: #000000;">=</span><span style="color: #000000;"> ViewName;
    }</span>
</pre>
    <p>
        In the Activate(...) method we will write to the text box whether the view is active
        or not:</p>
    <pre lang="cs">
<span style="color: #000000;">    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">override</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Activate(</span><span style="color: #0000FF;">bool</span><span style="color: #000000;"> activate)
    {
        textBox.Text </span><span style="color: #000000;">=</span><span style="color: #000000;"> activate </span><span style="color: #000000;">?</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Active</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> : </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Inactive</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">;
    }</span></pre>
    <a id="Modal Dialog form"></a><h2>
        Modal Dialog form</h2>
    <p>
        The last view we need to design is the About dialog view. Create a new form as shown
        below:</p>
    <p><img src="Images/4.png" alt="Modal Dialog form"/></p>
    <p>
        Again it will inherit from the WinFormView class and will have the [WinformsView]
        attribute. In the [WinformsView] attribute we specify "ShowModal = true" to make
        the view displayed as a modal dialog:</p>
    <pre lang="cs">
<span style="color: #000000;">    [WinformsView(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainTask), </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">About Dlg View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, ShowModal </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">)]
    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">partial</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> AboutDialog : WinFormView
    {
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> AboutDialog()
        {
            InitializeComponent();
        }
    }</span></pre>
    <a id="Starting the application"></a><h2>
        Starting the application</h2>
    <p>
        Starting an MVC#-based application means starting some task. Here we would start
        the main task. The main tasks takes on itself navigation to the starting view:</p>
    <pre lang="cs">
<span style="color: #000000;">    </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> MainTask : TaskBase
        ...
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">override</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> OnStart(</span><span style="color: #0000FF;">object</span><span style="color: #000000;"> param)
        {
            Navigator.NavigateDirectly(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Main View</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
        }</span></pre>
    <p>
        But before starting any task we need to prepare a configuration object which includes
        information on the types of views manager, task info provider and so on. Fortunately
        the WinformsViewsManager class provides a static method to obtain a configuration
        object tailored for the Windows Forms views engine:</p>
    <pre lang="cs">
<span style="color: #000000;">        </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Main()
        {
            MVCConfiguration config </span><span style="color: #000000;">=</span><span style="color: #000000;"> WinformsViewsManager.GetDefaultConfig();
            (</span><span style="color: #0000FF;">new</span><span style="color: #000000;"> TasksManager(config)).StartTask(</span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(MainTask));
            
            Application.Run(Application.OpenForms[</span><span style="color: #800080;">0</span><span style="color: #000000;">]);
        }</span></pre>
    <a id="Summary"></a><h2>
        Summary</h2>
    <p>
        We have shown how to use the Windows Forms presentation mechanism in MVC# applications.
        Different kinds of views and their features were covered for you to make the best
        of the Windows Forms views engine within the MVC# framework.</p>
    <p>
        <em>The source code of this example can be found under "Examples\WindowsFormsExample\" subfolder
            of the MVC# root folder.</em></p>

                </div>
            </div>
        </div>
        <div style="text-align:center; font-size:11px;">Copyright Â© www.MVCSharp.org</div>
    </form>
</body>

<!-- Mirrored from mvcsharp.org/Using_Winforms_views_engine/Default.aspx by HTTrack Website Copier/3.x [XR&CO'2008], Thu, 30 Oct 2008 03:46:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->
</html>
